<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Health Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/style.css" />
</head>

<body class="bg-dark text-light">
    <div class="container py-4">
        <h1 class="mb-4">üìù Daily Health Tracker</h1>

        <!-- Form Section -->
        <form action="/update" method="POST" class="mb-4">
            <h4>üì• Daily Inputs</h4>
            <input type="number" name="weight" placeholder="Weight (kg)" step="0.01" class="form-control mb-2" />
            <input type="number" name="waterIntake" placeholder="Water Intake (ml)" step="0.01"
                class="form-control mb-2" />

            <hr />

            <h4>üèãÔ∏è Add Exercise</h4>
            <input type="text" name="exerciseName" placeholder="Exercise Name" class="form-control mb-2" />
            <input type="number" name="exerciseCalories" placeholder="Calories Burnt" step="0.01"
                class="form-control mb-2" />

            <hr />

            <h4>üçΩÔ∏è Add Food Intake</h4>
            <input type="text" name="foodName" placeholder="Food Name" class="form-control mb-2" />
            <input type="number" name="foodWeight" placeholder="Food Weight (g)" step="0.01"
                class="form-control mb-2" />
            <input type="number" name="foodCalories" placeholder="Calories" step="0.01" class="form-control mb-2" />
            <input type="number" name="foodProtein" placeholder="Protein (g)" step="0.01" class="form-control mb-2" />

            <button class="btn btn-primary mt-3">Submit</button>
        </form>

        <!-- Single Unified Table -->
        <h4 class="mt-5">üìä Daily Summary</h4>
        <table class="table table-dark table-bordered text-light">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Weight (kg)</th>
                    <th>Maintenance Cal</th>
                    <th>Exercises (üî•)</th>
                    <th>Food Intake üçΩÔ∏è</th>
                    <th>Water (ml)</th>
                    <th>Calorie Deficit</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <%= entry.date %>
                    </td>
                    <td>
                        <%= entry.weight || '‚Äî' %>
                    </td>
                    <td>
                        <%= maintenance %>
                    </td>
                    <td>
                        <% if (entry.exercises.length===0) { %> ‚Äî
                            <% } else { %>
                                <% entry.exercises.forEach(ex=> { %>
                                    <div>
                                        <%= ex.name %> - <%= ex.calories.toFixed(2) %> kcal
                                    </div>
                                    <% }) %>
                                        <% } %>
                    </td>
                    <td>
                        <% if (entry.calorieIntake.length===0) { %> ‚Äî
                            <% } else { %>
                                <% entry.calorieIntake.forEach(f=> { %>
                                    <div>
                                        <%= f.name %> - <%= f.calories %> kcal
                                                <% if (f.protein) { %> / <%= f.protein %>g protein <% } %>
                                    </div>
                                    <% }) %>
                                        <hr class="bg-secondary" />
                                        <strong>Total:</strong>
                                        <%= totalCalories %> kcal /
                                            <%= totalProtein %>g protein
                                                <% } %>
                    </td>
                    <td>
                        <%= entry.waterIntake || 0 %>
                    </td>
                    <td>
                        <%= deficit %>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

</html>